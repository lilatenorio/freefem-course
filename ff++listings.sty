%% Author: Rafa Rodríguez Galván, 2011
%% LaTeX listings package for the language FreeFem++
%% Keywords extracted from FreeFem++ DOC/freefem++doc.tex

\RequirePackage{listings}

\lstdefinelanguage{freefem++}[]{C++}{%
  morekeywords={
    adaptmesh,
    Cmatrix,
    R3,
    bool,
    border,
    break,
    buildmesh,
    catch,
    cin,
    complex,
    continue,
    cout,
    element,
    else,
    end,
    fespace,
    for,
    func,
    if,
    ifstream,
    include,
    int,
    intalledge,
    load,
    macro,
    matrix,
    mesh,
    movemesh,
    ofstream,
    plot,
    problem,
    real,
    return,
    savemesh,
    solve,
    string,
    try,
    throw,
    vertex,
    varf,
    while
  }
  morekeywords2={
    % Second category of Keywords
    int1d,
    int2d,
    on,
    square,
    % Third category of Keywords
    dx,
    dy,
    convect,
    jump,
    mean,
    % Fourth category of Keywords
    wait,
    ps,
    solver,
    CG,
    LU,
    UMFPACK,
    factorize,
    init,
    endl,
    % Other Reserved Words
    x, y, z, pi, i,
    sin, cos, tan, atan, asin, acos,
    cotan,sinh,cosh,tanh,cotanh,
    exp, log, log10, sqrt
    abs, max, min
  }
}[keywords, comments, strings, directives]


\lstset{ frame=lbr,
     framerule=1.2pt,
     aboveskip=0.5cm,
     framextopmargin=3pt,
     framexbottommargin=3pt,
     % framexleftmargin=2pt,
     framesep=0pt,
     backgroundcolor=\color{gray!10},
     rulesepcolor=\color{black},
     xleftmargin=1.1cm,
     %
     stringstyle=\ttfamily,
     showstringspaces=false,
     basicstyle=\small\ttfamily,
     % basicstyle=\footnotesize\ttfamily,
     stringstyle=\color{green!65!purple},
     commentstyle=\color{blue!80},
     % identifierstyle=\bfseries,%
     keywordstyle=\color{orange!80!black},
     %
     numbers=left,
     numbersep=7pt,
     numberstyle=\tiny\color{gray!70},
     numberfirstline = false,
     breaklines=trufe,
     postbreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\color{red}\hookrightarrow\space}},
     %
     language=freefem++
   }
%  \usepackage{courier}

\usepackage{caption}

\DeclareCaptionFont{white}{\color{white}}

\DeclareCaptionFormat{listing}{\colorbox[cmyk]{0.43, 0.35,
    0.35,0.01}{\parbox{0.99\textwidth}{\hspace{15pt}#1#2#3}}}

\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white,
  singlelinecheck=false, margin=0pt, font={bf,sf,footnotesize}}

\renewcommand{\lstlistingname}{Example}% Listing -> Example
\renewcommand{\lstlistlistingname}{List of \lstlistingname s}% List of Listings -> List of Examples
